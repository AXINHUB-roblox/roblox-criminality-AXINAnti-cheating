åŸåˆ›AXIN ç‹¬å®¶åä½œå¼Š 
â€”â€”æ›´æ–°:FOXæƒé™ç»™äºˆç®¡ç†â†åˆ é™¤è¦ä¸ç„¶æ— æ³•æ‰§è¡Œ æŒ‡ä»¤â†“
/setPermission <ç”¨æˆ·å> <æƒé™ç­‰çº§>
local AntiCheatSystem = require(game.ServerScriptService:WaitForChild("AntiCheatSystem"))
AntiCheatSystem.Start()
local Policy = {}
Policy.Revision = 1

Policy.RateLimits = {
    Fire   = { perSecond = 9,  burst = 12 },
    Stab   = { perSecond = 4,  burst = 6  },
    Buy    = { perSecond = 2,  burst = 2  },
    Drop   = { perSecond = 3,  burst = 4  },
    Ping   = { perSecond = 3,  burst = 3  },
}

Policy.Movement = {
    MaxSpeed      = 30,    -- å«å†²åˆº/è¯æ•ˆä¸Šé™ï¼ˆm/sï¼‰
    MaxAccel      = 140,   -- m/s^2
    MaxFrameShift = 35,    -- å•å¸§ä½ç§»é˜ˆå€¼ï¼ˆç¬ç§»ï¼‰
    MaxAltitude   = 80,    -- ç¦»åœ°é«˜åº¦ï¼ˆæ— é£è¡Œè®¸å¯ï¼‰
    GroundProbe   = 220,   -- æ¢æµ‹å°„çº¿é•¿åº¦
}

-- æ­¦å™¨æ•°æ®ï¼ˆæœåŠ¡ç«¯æƒå¨é‡ç®—ä¼¤å®³/åååŠ›/å°„é€Ÿï¼‰
Policy.Weapons = {
    ["G17"] = { type="gun", dpsCap=180, bulletSpeed=500, rpm=600, pellet=1, baseDamage=22, headMul=2.0, bodyMul=1.0, limbMul=0.65, maxRange=200, spread=1.6, serverRecoil=2.1 },
    ["M1911"]={ type="gun", dpsCap=200, bulletSpeed=520, rpm=520, pellet=1, baseDamage=26, headMul=2.0, bodyMul=1.0, limbMul=0.7,  maxRange=190, spread=1.8, serverRecoil=2.3 },
    ["Knife"]={ type="melee", dpsCap=110, swingRate=1.6, baseDamage=35, backstabMul=1.5, range=6.5 },
}

Policy.InventoryWhitelist = {
    Tools = { "G17", "M1911", "Knife", "Bandage", "Medkit", "Ammo9mm"ï¼Œ"AKUN"},
}

-- ç»æµä¸Šé™ï¼ˆé˜²åˆ·é’±/æ´—é’±ï¼‰
Policy.Economy = {
    EarnPerMin   = 999999999,
    TradeCapMin  = 99999999,
    DropCapMin   = 99999999,
    StackLimit   = 99999999,
}

-- è®¡åˆ†ä¸åŠ¨ä½œé˜ˆå€¼
Policy.Scores = {
    TP=6, Speed=4, Accel=2, Fly=5,
    BadPayload=3, BadSig=5, Rate=2, BadItem=3, BadWeapon=4,
    DpsCap=5, RangeHack=4, ROF=4, Spoof=3
}
Policy.Actions = { warn=4, restrict=8, kick=12, ban=20 }

return Policy
local AdminByName = {}
local Players = game:GetService("Players")

local Combat = {}
Combat.__index = Combat

-- ä¿ç•™è¿‘å‡ ç™¾æ¯«ç§’ç©å®¶èƒ¶å›Šçš„å†å²ä½ç½®ï¼Œåš Lag Compensation
local history = {} -- [player] = { {t, pos, look}, ... }
local MAX_BACKTRACK = 0.25  -- ç§’

local function recordHistory(plr)
    plr.CharacterAdded:Connect(function(char)
        local hrp = char:WaitForChild("HumanoidRootPart",5)
        if not hrp then return end
        history[plr] = {}
        game:GetService("RunService").Heartbeat:Connect(function()
            local arr = history[plr]; if not arr then return end
            table.insert(arr, {t=time(), pos=hrp.Position, look=hrp.CFrame.LookVector})
            -- ä¿®å‰ª
            local cutoff = time() - MAX_BACKTRACK
            while #arr > 0 and arr[1].t < cutoff do table.remove(arr,1) end
        end)
    end)
    plr.CharacterRemoving:Connect(function() history[plr]=nil end)
end

local function backtrackPosition(target, shotTime)
    local arr = history[target]; if not arr or #arr==0 then return nil end
    -- çº¿æ€§æ’å€¼æ‰¾åˆ° shotTime é™„è¿‘ä½ç½®
    local prev, nextp
    for i=1,#arr-1 do
        if arr[i].t <= shotTime and arr[i+1].t >= shotTime then prev, nextp = arr[i], arr[i+1]; break end
    end
    if not prev then return arr[#arr].pos end
    local alpha = (shotTime - prev.t)/math.max(1e-6, nextp.t - prev.t)
    return prev.pos:Lerp(nextp.pos, math.clamp(alpha,0,1))
end

-- ç®€åŒ–çš„å‘½ä¸­éªŒè¯ï¼šå­å¼¹çº¿æ®µä¸â€œç›®æ ‡èƒ¶å›Šâ€è·ç¦»é˜ˆå€¼
local function capsuleHit(shooterPos, dir, range, targetPos)
    local bulletEnd = shooterPos + dir.Unit * range
    local seg = (bulletEnd - shooterPos)
    local t = math.clamp((targetPos - shooterPos):Dot(seg)/math.max(1e-6, seg:Dot(seg)),0,1)
    local closest = shooterPos + seg * t
    local dist = (closest - targetPos).Magnitude
    return dist < 4.0  -- èƒ¶å›ŠåŠå¾„è¿‘ä¼¼
end

function Combat.Init(policy, onFlag)
    Combat._policy = policy
    Combat._onFlag = onFlag
    Players.PlayerAdded:Connect(recordHistory)
end

-- å¤„ç†æªæ¢°å¼€ç«æ„å›¾ï¼ˆRemote å·²è¿‡ NetShieldï¼‰
-- payload: { weapon="G17", dir=Vector3, t=number(sigæ—¶é—´), target = number(UserId?) å¯é€‰ }
function Combat.ProcessFire(plr, payload)
    local w = Combat._policy.Weapons[payload.weapon]
    if not w or w.type~="gun" then
        return Combat._onFlag(plr, "BadWeapon", "Combat", {weapon = payload.weapon})
    end
    -- æœåŠ¡å™¨æƒå¨é‡ç®—ï¼šå°„é€Ÿ/DPS/è·ç¦»
    -- ä½ å¯ä»¥ä¸ºæ¯ä½ç©å®¶ç»´æŠ¤ä¸€ä¸ªæ­¦å™¨å†·å´è¡¨ï¼Œè¿™é‡Œçœç•¥å­˜å‚¨ï¼Œæ¼”ç¤ºå…³é”®æ ¡éªŒï¼š
    -- ç¤ºä¾‹ï¼šéªŒè¯æ–¹å‘å•ä½å‘é‡
    if payload.dir.Magnitude < 0.5 or payload.dir.Magnitude > 1.5 then
        return Combat._onFlag(plr,"BadPayload","Combat",{why="dir"})
    end

    -- L-Cï¼šæ ¹æ®å®¢æˆ·ç«¯æ—¶é—´æˆ³å›æº¯ç›®æ ‡ä½ç½®ï¼ˆæˆ–è‡³å°‘å›æº¯å°„æ‰‹è‡ªèº«ä½ç½®ï¼‰
    local shotTime = math.clamp(payload.t or time(), time()-0.5, time())
    -- å‘½ä¸­éªŒè¯ï¼ˆå¯é€‰ï¼šå¦‚æœå¸¦ targetIdï¼Œæ›´ä¸¥æ ¼æ ¸éªŒï¼‰
    if payload.targetUserId then
        local targetPlr = game.Players:GetPlayerByUserId(payload.targetUserId)
        if targetPlr and targetPlr.Character then
            local tgtPos = backtrackPosition(targetPlr, shotTime) or targetPlr.Character:FindFirstChild("HumanoidRootPart").Position
            -- è·ç¦»/å°„ç¨‹æ ¡éªŒ
            local shooterPos = plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") and plr.Character.HumanoidRootPart.Position
            if not shooterPos then return end
            local range = w.maxRange
            if not capsuleHit(shooterPos, payload.dir, range, tgtPos) then
                return Combat._onFlag(plr,"RangeHack","Combat",{w=payload.weapon})
            end
        end
    end

    -- ä¼¤å®³é‡ç®—ï¼ˆæœåŠ¡å™¨æŸ¥è¡¨ï¼Œä¸ä¿¡å®¢æˆ·ç«¯ï¼‰
    -- ç¤ºä¾‹ï¼šä½ å¯åœ¨è¿™é‡Œåšéƒ¨ä½åˆ¤å®šï¼ˆæœåŠ¡å™¨ç”¨å°„çº¿/RaycastWhitelistï¼‰
    -- è¿™é‡Œç”¨ç®€åŒ–ï¼šå‘½ä¸­åˆ™æŒ‰ bodyMulï¼Œæš´å‡»ç”±æœåŠ¡å™¨å¦ç®—
    local base = w.baseDamage
    local dmg = base * w.bodyMul
    -- DPS ä¸Šé™é˜²è¿ç‚¹/æ”¹é€Ÿ
    --ï¼ˆçœŸå®å®ç°åº”è¿½è¸ªæ¯ç§’ç´¯è®¡ä¼¤å®³ä¸å°„é€Ÿï¼Œè¿™é‡Œæ¼”ç¤ºè§¦å‘ç‚¹ï¼‰
    -- Combat._onFlag(plr, "DpsCap", "Combat", {...}) -- ä½ åœ¨é›†æˆæ—¶åŠ ä¸Šç´¯è®¡å™¨

    -- çœŸæ­£æ–½åŠ ä¼¤å®³ï¼ˆæœåŠ¡ç«¯ï¼‰
    -- ä¾‹ï¼šæ‰¾åˆ° Humanoid å¹¶å‡è¡€ï¼ˆç•¥ï¼‰
end

-- è¿‘æˆ˜
-- payload: { weapon="Knife", aim=Vector3, t=number }
function Combat.ProcessMelee(plr, payload)
    local w = Combat._policy.Weapons[payload.weapon]
    if not w or w.type~="melee" then
        return Combat._onFlag(plr, "BadWeapon", "Combat", {weapon = payload.weapon})
    end
    -- æœåŠ¡å™¨ç”¨å°„çº¿/åŒºåŸŸæ£€æµ‹ç›®æ ‡æ˜¯å¦åœ¨ w.range å†…ï¼›å®¢æˆ·ç«¯åªæŠ¥â€œæ„å›¾â€
    -- å‘½ä¸­åæœåŠ¡å™¨é‡ç®—æ˜¯å¦èƒŒåˆºã€ä¼¤å®³å€ç‡ç­‰
end

return Combat
-- AntiMoveGuard.module.lua
-- åŸåˆ›ç§»åŠ¨é€Ÿåº¦ + èŒƒå›´æ£€æµ‹åä½œå¼Š
-- æ”¯æŒåˆ†çº§å¤„ç½šï¼šä¸¥é‡ 43 å¤©ï¼Œè½»åº¦ 15 å¤©
-- æ”¯æŒç”¨æˆ·åè§£å°

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local AntiMoveGuard = {}

-- å‚æ•°é…ç½®
local Config = {
    MaxSpeed = 30,         -- å…è®¸æœ€å¤§é€Ÿåº¦ï¼ˆm/sï¼‰
    MaxTeleportDist = 50,  -- å•å¸§å…è®¸çš„æœ€å¤§ä½ç§»ï¼ˆmï¼‰
    SevereBanDays = 43,    -- ä¸¥é‡å¤„ç½šå¤©æ•°
    MinorBanDays = 15,     -- è½»åº¦å¤„ç½šå¤©æ•°
}

-- å°ç¦æ•°æ®ï¼ˆç®€å•å†…å­˜è¡¨ï¼Œå®é™…åº”æ”¾ DataStoreï¼‰
local Bans = {}  -- [UserId] = { expire = æ—¶é—´æˆ³, reason = "string" }

-- å°ç¦å‡½æ•°
local function banPlayer(plr, days, reason)
    local expire = os.time() + (days * 24 * 60 * 60)
    Bans[plr.UserId] = { expire = expire, reason = reason }
    plr:Kick("[AntiCheat] ä½ å·²è¢«å°ç¦ "..days.." å¤©\nåŸå› : "..reason.."\nå¦‚éœ€ç”³è¯‰è¯·è”ç³»ç®¡ç†å‘˜")
end

-- æ£€æŸ¥æ˜¯å¦å·²å°ç¦
function AntiMoveGuard.IsBanned(plr)
    local ban = Bans[plr.UserId]
    if ban and os.time() < ban.expire then
        return true, ban
    end
    return false
end

-- è§£å°
function AntiMoveGuard.UnbanByName(name)
    for userId, info in pairs(Bans) do
        local plr = Players:GetPlayerByUserId(userId)
        if plr and plr.Name == name then
            Bans[userId] = nil
            return true
        end
    end
    -- å¦‚æœç©å®¶ä¸åœ¨çº¿ï¼Œå¯ä»¥æ ¹æ® DataStore æŸ¥è¯¢ç”¨æˆ·åâ†’UserId æ¥å®ç°
    for userId, info in pairs(Bans) do
        local success, plrName = pcall(function()
            return Players:GetNameFromUserIdAsync(userId)
        end)
        if success and plrName == name then
            Bans[userId] = nil
            return true
        end
    end
    return false
end

-- æ ¸å¿ƒæ£€æµ‹é€»è¾‘
function AntiMoveGuard.Start()
    Players.PlayerAdded:Connect(function(plr)
        local banned, info = AntiMoveGuard.IsBanned(plr)
        if banned then
            plr:Kick("[AntiCheat] ä½ ä»å¤„äºå°ç¦ä¸­\nåŸå› : "..info.reason.."\nåˆ°æœŸ: "..os.date("%Y-%m-%d %H:%M:%S", info.expire))
            return
        end

        plr.CharacterAdded:Connect(function(char)
            local hrp = char:WaitForChild("HumanoidRootPart", 5)
            if not hrp then return end

            local lastPos = hrp.Position
            local lastT = os.clock()

            RunService.Heartbeat:Connect(function()
                if not hrp.Parent then return end
                local now = os.clock()
                local dt = now - lastT
                if dt <= 0 then return end

                local pos = hrp.Position
                local dist = (pos - lastPos).Magnitude
                local speed = dist / dt

                if speed > Config.MaxSpeed * 1.5 then
                    banPlayer(plr, Config.SevereBanDays, "ç§»åŠ¨é€Ÿåº¦å¼‚å¸¸")
                elseif dist > Config.MaxTeleportDist then
                    banPlayer(plr, Config.MinorBanDays, "ç¬ç§»/èŒƒå›´å¼‚å¸¸")
                end

                lastPos, lastT = pos, now
            end)
        end)
    end)
end

return AntiMoveGuard-- ServerScriptService/UnbanCommands.server.lua
-- ç®¡ç†å‘˜èŠå¤©è¾“å…¥ "!unban ç”¨æˆ·å" å³å¯è§£å°

local Players = game:GetService("Players")
local TextChatService = game:GetService("TextChatService") -- æ–°èŠå¤©ç³»ç»Ÿ
local BanService = require(script.Parent:WaitForChild("BanService"))
local AdminCheck = require(script.Parent:WaitForChild("AdminCheck"))

-- è¿›å…¥æ¸¸æˆæ—¶è‡ªåŠ¨æ£€æŸ¥å°ç¦
Players.PlayerAdded:Connect(function(plr)
	task.defer(function()
		local banned, data = BanService.IsBanned(plr.UserId)
		if banned then
			local untilStr = os.date("%Y-%m-%d %H:%M:%S", data.expire)
			plr:Kick(("[AntiCheat] ä½ è¢«å°ç¦è‡³ %s\nåŸå› : %s"):format(untilStr, tostring(data.reason or "violation")))
		end
	end)
end)

-- ç»Ÿä¸€å¤„ç†è§£å°é€»è¾‘
local function handleUnbanRequest(requester, nameArg)
	if not AdminCheck.IsAdmin(requester) then
		return false, "no_permission"
	end
	if not nameArg or nameArg == "" then
		return false, "usage: !unban ç”¨æˆ·å"
	end
	local ok, err = BanService.UnbanByUsername(nameArg)
	if not ok then
		return false, "unban_failed: " .. tostring(err)
	end
	return true
end

-- â‘  æ–°èŠå¤©ç³»ç»Ÿï¼ˆæ¨èï¼‰
if TextChatService and TextChatService.ChatVersion == Enum.ChatVersion.TextChatService then
	local function onCmd(fromSpeaker: Player, text: string)
		if text:sub(1, 7):lower() == "!unban " then
			local targetName = text:sub(8):gsub("^%s+", ""):gsub("%s+$", "")
			local ok, err = handleUnbanRequest(fromSpeaker, targetName)
			if ok then
				TextChatService:DisplaySystemMessage(("âœ… å·²è§£å°ï¼š%sï¼ˆæ“ä½œäººï¼š%sï¼‰"):format(targetName, fromSpeaker.Name))
			else
				TextChatService:DisplaySystemMessage(("â›” æ— æ³•è§£å°ï¼š%s"):format(err))
			end
		end
	end

	-- ç›‘å¬æ‰€æœ‰ç©å®¶çš„æ¶ˆæ¯
	Players.PlayerAdded:Connect(function(plr)
		plr.Chatted:Connect(function(_) end) -- å…¼å®¹æ—§ APIï¼ˆä¸ä½¿ç”¨ï¼‰
	end)

	-- ä½¿ç”¨ TextChatService hookï¼š
	if TextChatService.OnIncomingMessage then
		TextChatService.OnIncomingMessage = function(msg: TextChatMessage)
			local speaker = msg.TextSource and Players:GetPlayerByUserId(msg.TextSource.UserId)
			if speaker then onCmd(speaker, msg.Text) end
			return msg
		end
	end
else
	-- â‘¡ æ—§èŠå¤©ç³»ç»Ÿï¼ˆå¤‡ç”¨ï¼‰
	Players.PlayerAdded:Connect(function(plr)
		plr.Chatted:Connect(function(message)
			if message:sub(1, 7):lower() == "!unban " then
				local targetName = message:sub(8):gsub("^%s+", ""):gsub("%s+$", "")
				local ok, err = handleUnbanRequest(plr, targetName)
				if ok then
					plr:LoadCharacter()
					print(("å·²è§£å°ï¼š%sï¼ˆæ“ä½œäººï¼š%sï¼‰"):format(targetName, plr.Name))
				else
					warn(("æ— æ³•è§£å°ï¼š%s"):format(err))
				end
			end
		end)
	end)
endlocal Players = game:GetService("Players")
local DataStoreService = game:GetService("DataStoreService")
local RunService = game:GetService("RunService")
local BanStore = DataStoreService:GetDataStore("BanStore_v3")  -- ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†
local AntiSilentAim = {}

-- å­˜å‚¨å°ç¦è®°å½•
local function getBanKey(userId)
    return "ban:" .. tostring(userId)
end

-- ç©å®¶å°ç¦æ“ä½œ
function AntiSilentAim.BanPlayer(player, reason)
    local userId = player.UserId
    local expirationTime = os.time() + (120 * 24 * 60 * 60)  -- å°ç¦120å¤©

    -- å­˜å‚¨å°ç¦ä¿¡æ¯åˆ° DataStore
    local success, err = pcall(function()
        BanStore:SetAsync(getBanKey(userId), {expire = expirationTime, reason = reason})
    end)

    if not success then
        warn("æ— æ³•è®°å½•å°ç¦ä¿¡æ¯: " .. err)
    end

    -- å°ç¦ç©å®¶
    player:Kick(("[AntiSilentAim] ä½ å› ä½¿ç”¨é™é»˜ç„å‡†è¢«å°ç¦ï¼Œå°ç¦æ—¶é—´ï¼š120å¤©\nåŸå› ï¼š%s"):format(reason))
end

-- æ£€æŸ¥ç©å®¶æ˜¯å¦å°ç¦
function AntiSilentAim.CheckBanStatus(player)
    local userId = player.UserId
    local banData = BanStore:GetAsync(getBanKey(userId))

    if banData then
        if banData.expire > os.time() then
            -- å¦‚æœå°ç¦æ—¶é—´è¿˜æœªåˆ°æœŸï¼Œè¸¢å‡ºç©å®¶
            player:Kick(("[AntiSilentAim] ä½ è¢«å°ç¦è‡³: %s\nåŸå› : %s"):format(os.date("%Y-%m-%d %H:%M:%S", banData.expire), banData.reason))
            return true
        else
            -- å°ç¦æ—¶é—´åˆ°æœŸï¼Œè‡ªåŠ¨è§£å°
            pcall(function()
                BanStore:RemoveAsync(getBanKey(userId))
            end)
        end
    end
    return false
end

-- è®¡ç®—ç©å®¶ç„å‡†è§’åº¦å·®å¼‚
function AntiSilentAim.CalculateAimingDifference(player)
    local char = player.Character
    if not char then return 0 end

    local hrp = char:FindFirstChild("HumanoidRootPart")
    local humanoid = char:FindFirstChild("Humanoid")
    if not hrp or not humanoid then return 0 end

    -- è·å–ç©å®¶å½“å‰è§†è§’ï¼ˆç„å‡†æ–¹å‘ï¼‰
    local camera = game.Workspace.CurrentCamera
    local viewDirection = (camera.CFrame.LookVector).unit

    -- è·å–ç©å®¶çš„èº«ä½“æ–¹å‘
    local bodyDirection = hrp.CFrame.LookVector.unit

    -- è®¡ç®—ä¸¤ä¸ªæ–¹å‘ä¹‹é—´çš„è§’åº¦å·®å¼‚
    local angleDiff = math.acos(viewDirection:Dot(bodyDirection))
    return angleDiff
end

-- æ£€æŸ¥å°„å‡»ç›®æ ‡æ˜¯å¦æ­£å¸¸
function AntiSilentAim.ValidateShot(player, shotPosition)
    local char = player.Character
    if not char then return false end

    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end

    -- è®¡ç®—ä»ç©å®¶ä½ç½®åˆ°å°„å‡»ä½ç½®çš„è·ç¦»
    local distance = (hrp.Position - shotPosition).Magnitude

    -- æ£€æŸ¥æ˜¯å¦ä¸ºè¶…è¿œè·ç¦»å°„å‡»ï¼ˆå¿½ç•¥å®é™…èŒƒå›´é™åˆ¶ï¼‰
    if distance > 500 then
        return true  -- å¯èƒ½ä¸ºé™é»˜ç„å‡†
    end

    -- è¿›ä¸€æ­¥æ£€æŸ¥å°„å‡»çš„å‡†ç¡®æ€§ï¼šå°„å‡»ä½ç½®ä¸æ•Œäººèº«ä½“éƒ¨ä½ç›¸è·å¤ªå°
    local targetPart = workspace:FindPartOnRay(Ray.new(hrp.Position, shotPosition - hrp.Position))
    if targetPart and targetPart.Parent then
        local targetPlayer = Players:GetPlayerFromCharacter(targetPart.Parent)
        if targetPlayer then
            -- å¦‚æœå‡»ä¸­ç›®æ ‡ä¸”ä½ç½®è¿‡äºç²¾ç¡®ï¼Œè®¤ä¸ºæ˜¯ä½œå¼Š
            return true
        end
    end

    return false
end

-- ç›‘æ§ç©å®¶è¡Œä¸º
function AntiSilentAim.MonitorPlayer(player)
    -- ç›‘æ§ç„å‡†è§’åº¦ä¸å°„å‡»å‡†ç¡®æ€§
    local lastCheckTime = os.clock()
    local checkInterval = 0.7  -- æ¯0.7ç§’æ£€æŸ¥ä¸€æ¬¡

    RunService.Heartbeat:Connect(function()
        if os.clock() - lastCheckTime >= checkInterval then
            lastCheckTime = os.clock()

            -- æ£€æŸ¥æ˜¯å¦å­˜åœ¨å°ç¦çŠ¶æ€
            if AntiSilentAim.CheckBanStatus(player) then
                return
            end

            -- è®¡ç®—ç„å‡†è§’åº¦å·®å¼‚
            local angleDiff = AntiSilentAim.CalculateAimingDifference(player)

            -- å¦‚æœç„å‡†è§’åº¦è¿‡å°ï¼Œä¸”æ£€æµ‹åˆ°å…¶ä»–ä¸æ­£å¸¸è¡Œä¸ºï¼Œè®¤å®šä¸ºé™é»˜ç„å‡†
            if angleDiff < 0.1 then  -- 0.1 å¼§åº¦ä¸ºåˆ¤æ–­æ ‡å‡†ï¼Œå¯èƒ½éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µè°ƒæ•´
                local shotPosition = player:GetMouse().Hit.p  -- è·å–å°„å‡»ä½ç½®ï¼ˆç®€åŒ–ç‰ˆï¼‰
                if AntiSilentAim.ValidateShot(player, shotPosition) then
                    -- æ£€æµ‹åˆ°é™é»˜ç„å‡†ï¼Œç«‹å³å°ç¦ç©å®¶
                    AntiSilentAim.BanPlayer(player, "SilentAimCheat")
                end
            end
        end
    end)
end

-- å¼€å§‹é˜²ä½œå¼Šæ£€æŸ¥
function AntiSilentAim.Start()
    Players.PlayerAdded:Connect(function(player)
        -- å…ˆæ£€æŸ¥ç©å®¶æ˜¯å¦è¢«å°ç¦
        if AntiSilentAim.CheckBanStatus(player) then
            return
        end

        -- å¯åŠ¨ç©å®¶ç›‘æ§
        AntiSilentAim.MonitorPlayer(player)
    end)
end

return AntiSilentAim
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local DataStoreService = game:GetService("DataStoreService")

-- åŠ¨æ€å˜åŒ–çš„åä½œå¼Šæ ¡éªŒ
local AntiCheatGuard = {}

-- å­˜å‚¨ä½œå¼Šè®°å½•ï¼ˆç®€åŒ–ç‰ˆï¼Œå®é™…ä½¿ç”¨æ—¶åº”è¯¥å­˜åˆ° DataStoreï¼‰
local cheatRecords = {}

-- æ ¡éªŒç©å®¶ä½ç½®å’Œé€Ÿåº¦çš„é˜ˆå€¼
local MAX_SPEED = 50  -- æœ€å¤§é€Ÿåº¦ï¼Œå•ä½ï¼šStuds/ç§’
local MAX_DISTANCE = 100  -- æœ€å¤§ä½ç§»ï¼Œå•ä½ï¼šStudsï¼ˆæ¯å¸§ï¼‰

-- ç©å®¶é€Ÿåº¦å’Œä½ç§»æ ¡éªŒ
function AntiCheatGuard.ValidatePlayerMovement(plr, position, lastPosition, lastTime)
    local deltaTime = lastTime and (os.clock() - lastTime) or 0
    if deltaTime <= 0 then return end
    local distance = (position - lastPosition).Magnitude
    local speed = distance / deltaTime

    -- åˆ¤æ–­é€Ÿåº¦æ˜¯å¦å¼‚å¸¸
    if speed > MAX_SPEED then
        warn("ç©å®¶é€Ÿåº¦å¼‚å¸¸: " .. plr.Name)
        return true, "SpeedCheat"
    end

    -- åˆ¤æ–­ä½ç§»æ˜¯å¦å¼‚å¸¸
    if distance > MAX_DISTANCE then
        warn("ç©å®¶ä½ç§»å¼‚å¸¸: " .. plr.Name)
        return true, "TeleportCheat"
    end

    return false
end

-- ç©å®¶ä¿¡æ¯æ ¡éªŒï¼šé˜²æ­¢å®¢æˆ·ç«¯ä¿®æ”¹
function AntiCheatGuard.ValidateClientData(plr)
    local playerData = plr:FindFirstChild("PlayerData")  -- å‡è®¾æœ‰å­˜å‚¨ç©å®¶æ•°æ®

    -- æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç©å®¶æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®æ²¡æœ‰è¢«ç¯¡æ”¹
    if not playerData then
        warn("æ²¡æœ‰æ‰¾åˆ°ç©å®¶æ•°æ®: " .. plr.Name)
        return true, "NoPlayerData"
    end

    -- ä½ å¯ä»¥æ‰©å±•éªŒè¯æ–¹å¼ï¼Œæ¯”å¦‚å¯¹æ¯”ç©å®¶æ•°æ®çš„æ­£ç¡®æ€§
    if playerData.SomeValue < 0 then
        warn("ç©å®¶æ•°æ®ä¸æ­£å¸¸: " .. plr.Name)
        return true, "DataCheat"
    end

    return false
end

-- å®šæ—¶æ£€æŸ¥ï¼šé˜²æ­¢é•¿æ—¶é—´åœç•™åœ¨æŸä¸ªä½ç½®
function AntiCheatGuard.CheckForSuspiciousActivity(plr)
    -- æ¯15ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡
    local lastCheckTime = 0
    local checkInterval = 15  -- 15ç§’

    -- å®šæ—¶æ£€æµ‹
    RunService.Heartbeat:Connect(function()
        if os.clock() - lastCheckTime >= checkInterval then
            lastCheckTime = os.clock()

            -- è·å–ç©å®¶å½“å‰çš„ä½ç½®
            local char = plr.Character
            if char then
                local hrp = char:FindFirstChild("HumanoidRootPart")
                if hrp then
                    local currentPos = hrp.Position
                    local lastPos = plr:FindFirstChild("LastPosition")

                    if lastPos then
                        local moved, reason = AntiCheatGuard.ValidatePlayerMovement(plr, currentPos, lastPos.Value, lastCheckTime)
                        if moved then
                            -- è®°å½•ä½œå¼Šè¡Œä¸º
                            cheatRecords[plr.UserId] = {reason = reason, timestamp = os.time()}
                            plr:Kick("[AntiCheat] è¢«è¸¢å‡ºï¼šæ£€æµ‹åˆ°å¼‚å¸¸è¡Œä¸º " .. reason)
                        end
                    end
                    -- æ›´æ–°ç©å®¶ä½ç½®
                    if not plr:FindFirstChild("LastPosition") then
                        local lastPosition = Instance.new("Vector3Value")
                        lastPosition.Name = "LastPosition"
                        lastPosition.Parent = plr
                    end
                    plr.LastPosition.Value = currentPos
                end
            end
        end
    end)
end

-- é˜²æ­¢è¿œç¨‹äº‹ä»¶è¢«æ»¥ç”¨ï¼ˆé˜²æ­¢ä½œå¼Šçš„è„šæœ¬åˆ©ç”¨ï¼‰
function AntiCheatGuard.RestrictRemoteCalls()
    -- é™åˆ¶è¿œç¨‹äº‹ä»¶è°ƒç”¨é¢‘ç‡ï¼Œé¿å…å¿«é€Ÿè°ƒç”¨ï¼ˆDoSæ”»å‡»ï¼‰
    local remoteCalls = {}
    local cooldown = 0.2  -- 0.2ç§’å†·å´æ—¶é—´

    -- å‡è®¾ä½ æœ‰ä¸€ä¸ªè¿œç¨‹äº‹ä»¶ç”¨äºæ¥æ”¶ç©å®¶çš„è¡Œä¸º
    local remoteEvent = game.ReplicatedStorage:WaitForChild("SomeRemoteEvent")

    remoteEvent.OnServerEvent:Connect(function(plr, action)
        local currentTime = os.clock()
        if remoteCalls[plr.UserId] and currentTime - remoteCalls[plr.UserId] < cooldown then
            warn("è¿œç¨‹äº‹ä»¶è°ƒç”¨è¿‡äºé¢‘ç¹: " .. plr.Name)
            plr:Kick("[AntiCheat] è¢«è¸¢å‡ºï¼šè¿œç¨‹äº‹ä»¶è°ƒç”¨é¢‘ç¹")
        else
            remoteCalls[plr.UserId] = currentTime
            -- ç»§ç»­å¤„ç†åˆæ³•è¯·æ±‚
        end
    end)
end

-- ä¸»é€»è¾‘ï¼šåˆå§‹åŒ–ç©å®¶æ£€æŸ¥
function AntiCheatGuard.Start()
    Players.PlayerAdded:Connect(function(plr)
        -- é˜²æ­¢ç¯¡æ”¹ï¼šæ£€æŸ¥å®¢æˆ·ç«¯æ•°æ®
        local cheated, reason = AntiCheatGuard.ValidateClientData(plr)
        if cheated then
            cheatRecords[plr.UserId] = {reason = reason, timestamp = os.time()}
            plr:Kick("[AntiCheat] è¢«è¸¢å‡ºï¼šæ£€æµ‹åˆ°å®¢æˆ·ç«¯ç¯¡æ”¹è¡Œä¸º")
            return
        end

        -- æ£€æŸ¥ç©å®¶è¡Œä¸ºï¼šé¿å…å¡åœ¨åŒä¸€ä½ç½®
        AntiCheatGuard.CheckForSuspiciousActivity(plr)
        -- é™åˆ¶è¿œç¨‹äº‹ä»¶è°ƒç”¨
        AntiCheatGuard.RestrictRemoteCalls()
    end)
end
local Players = game:GetService("Players")
local DataStoreService = game:GetService("DataStoreService")
local BanStore = DataStoreService:GetDataStore("BanStore_v4")  -- ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†

local MarkCheaterSystem = {}

-- å­˜å‚¨å°ç¦è®°å½•
local function getBanKey(userId)
    return "ban:" .. tostring(userId)
end

-- ç©å®¶å°ç¦æ“ä½œ
function MarkCheaterSystem.BanPlayer(player, reason)
    local userId = player.UserId
    local expirationTime = os.time() + (43 * 24 * 60 * 60)  -- å°ç¦43å¤©

    -- å­˜å‚¨å°ç¦ä¿¡æ¯åˆ° DataStore
    local success, err = pcall(function()
        BanStore:SetAsync(getBanKey(userId), {expire = expirationTime, reason = reason})
    end)

    if not success then
        warn("æ— æ³•è®°å½•å°ç¦ä¿¡æ¯: " .. err)
    end

    -- å°ç¦ç©å®¶
    player:Kick(("[AntiCheat] ä½ å› ä½¿ç”¨ä½œå¼Šè¢«å°ç¦ï¼Œå°ç¦æ—¶é—´ï¼š43å¤©\nåŸå› ï¼š%s"):format(reason))
end

-- æ£€æŸ¥ç©å®¶æ˜¯å¦å°ç¦
function MarkCheaterSystem.CheckBanStatus(player)
    local userId = player.UserId
    local banData = BanStore:GetAsync(getBanKey(userId))

    if banData then
        if banData.expire > os.time() then
            -- å¦‚æœå°ç¦æ—¶é—´è¿˜æœªåˆ°æœŸï¼Œè¸¢å‡ºç©å®¶
            player:Kick(("[AntiCheat] ä½ è¢«å°ç¦è‡³: %s\nåŸå› : %s"):format(os.date("%Y-%m-%d %H:%M:%S", banData.expire), banData.reason))
            return true
        else
            -- å°ç¦æ—¶é—´åˆ°æœŸï¼Œè‡ªåŠ¨è§£å°
            pcall(function()
                BanStore:RemoveAsync(getBanKey(userId))
            end)
        end
    end
    return false
end

-- æ ‡è®°ä½œå¼Šè€…å¹¶å¯åŠ¨å¤„ç½šæœºåˆ¶
function MarkCheaterSystem.MarkAndPunish(player, cheatType)
    local userId = player.UserId

    -- æ ‡è®°ä½œå¼Šç±»å‹å¹¶ç­‰å¾…12ç§’
    local markTime = os.time()
    local markInfo = {cheatType = cheatType, time = markTime}

    -- è®°å½•æ ‡è®°ä¿¡æ¯
    local success, err = pcall(function()
        BanStore:SetAsync("mark:" .. tostring(userId), markInfo)
    end)

    if not success then
        warn("æ— æ³•è®°å½•æ ‡è®°ä¿¡æ¯: " .. err)
    end

    -- ç­‰å¾…12ç§’åå¯åŠ¨å¤„ç½šæœºåˆ¶
    delay(12, function()
        -- æ£€æŸ¥ç©å®¶æ˜¯å¦å·²ç»è¢«æ ‡è®°å¹¶ä¸”æ²¡æœ‰è§£å°
        local currentMark = BanStore:GetAsync("mark:" .. tostring(userId))

        if currentMark and currentMark.time == markTime then
            -- 12ç§’å†…è§¦å‘å¤„ç½šæœºåˆ¶
            MarkCheaterSystem.BanPlayer(player, cheatType)
        end
    end)
end

-- å¤„ç†ç©å®¶åŠ å…¥äº‹ä»¶
function MarkCheaterSystem.Start()
    Players.PlayerAdded:Connect(function(player)
        -- å…ˆæ£€æŸ¥ç©å®¶æ˜¯å¦è¢«å°ç¦
        if MarkCheaterSystem.CheckBanStatus(player) then
            return
        end

        -- åœ¨æ¸¸æˆä¸­ç»™ç®¡ç†å‘˜æä¾›æ ‡è®°åŠŸèƒ½
        -- ä¸¾ä¸ªä¾‹å­ï¼šç®¡ç†å‘˜å¯ä»¥é€šè¿‡èŠå¤©å‘½ä»¤æ ‡è®°ä½œå¼Šç©å®¶
        local function markCheatCommand(message)
            local parts = message:split(" ")
            if parts[1] == "!markcheat" and parts[2] and parts[3] then
                local targetPlayerName = parts[2]
                local cheatType = parts[3]

                local targetPlayer = Players:FindFirstChild(targetPlayerName)
                if targetPlayer then
                    -- åªæœ‰ç®¡ç†å‘˜èƒ½å¤Ÿæ‰§è¡Œæ­¤æ“ä½œ
                    if player.UserId == 123456789 then  -- è¿™é‡Œå¡«å…¥ç®¡ç†å‘˜çš„ UserId
                        -- æ ‡è®°ä½œå¼Šå¹¶è§¦å‘å¤„ç½šæœºåˆ¶
                        MarkCheaterSystem.MarkAndPunish(targetPlayer, cheatType)
                    end
                end
            end
        end

        player.Chatted:Connect(markCheatCommand)
    end)
end

return MarkCheaterSystem
local Players = game:GetService("Players")
local DataStoreService = game:GetService("DataStoreService")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local BanStore = DataStoreService:GetDataStore("BanStore_v5")  -- ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†

local BulletThroughWallDetector = {}

-- å­˜å‚¨å°ç¦è®°å½•
local function getBanKey(userId)
    return "ban:" .. tostring(userId)
end

-- ç©å®¶å°ç¦æ“ä½œ
function BulletThroughWallDetector.BanPlayer(player, reason)
    local userId = player.UserId
    local expirationTime = os.time() + (12 * 24 * 60 * 60)  -- å°ç¦12å¤©

    -- å­˜å‚¨å°ç¦ä¿¡æ¯åˆ° DataStore
    local success, err = pcall(function()
        BanStore:SetAsync(getBanKey(userId), {expire = expirationTime, reason = reason})
    end)

    if not success then
        warn("æ— æ³•è®°å½•å°ç¦ä¿¡æ¯: " .. err)
    end

    -- å°ç¦ç©å®¶
    player:Kick(("[AntiCheat] ä½ å› ä½¿ç”¨ç©¿å¢™ä½œå¼Šè¢«å°ç¦ï¼Œå°ç¦æ—¶é—´ï¼š12å¤©\nåŸå› ï¼š%s"):format(reason))
end

-- æ£€æŸ¥ç©å®¶æ˜¯å¦å°ç¦
function BulletThroughWallDetector.CheckBanStatus(player)
    local userId = player.UserId
    local banData = BanStore:GetAsync(getBanKey(userId))

    if banData then
        if banData.expire > os.time() then
            -- å¦‚æœå°ç¦æ—¶é—´è¿˜æœªåˆ°æœŸï¼Œè¸¢å‡ºç©å®¶
            player:Kick(("[AntiCheat] ä½ è¢«å°ç¦è‡³: %s\nåŸå› : %s"):format(os.date("%Y-%m-%d %H:%M:%S", banData.expire), banData.reason))
            return true
        else
            -- å°ç¦æ—¶é—´åˆ°æœŸï¼Œè‡ªåŠ¨è§£å°
            pcall(function()
                BanStore:RemoveAsync(getBanKey(userId))
            end)
        end
    end
    return false
end

-- æ£€æµ‹å°„å‡»æ˜¯å¦ç©¿é€å¢™å£
function BulletThroughWallDetector.DetectBulletThroughWall(player, shotPosition, targetPosition)
    local char = player.Character
    if not char then return false end

    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return false end

    -- åˆ›å»ºä¸€æ¡ä»ç©å®¶å°„å‡»ä½ç½®åˆ°ç›®æ ‡ä½ç½®çš„å°„çº¿
    local ray = Ray.new(shotPosition, (targetPosition - shotPosition).unit * 500)

    -- æ£€æŸ¥å°„çº¿ä¸ä¸–ç•Œä¸­çš„ç‰©ä½“æ˜¯å¦ç›¸äº¤
    local hitPart, hitPosition = Workspace:FindPartOnRay(ray, player.Character, false, true)

    -- å¦‚æœå°„çº¿å‡»ä¸­äº†ç‰©ä½“ï¼Œå¹¶ä¸”è¿™ä¸ªç‰©ä½“ä¸æ˜¯ç©å®¶çš„ç›®æ ‡ï¼Œè¯´æ˜å¯èƒ½æ˜¯ç©¿å¢™
    if hitPart and hitPart.Parent and hitPart.Parent ~= char and hitPart.CanCollide then
        -- ç©å®¶å°„å‡»ç©¿é€äº†å¢™å£æˆ–å…¶ä»–éšœç¢ç‰©
        return true
    end

    return false
end

-- ç›‘æ§ç©å®¶å°„å‡»è¡Œä¸º
function BulletThroughWallDetector.MonitorPlayer(player)
    local lastShotTime = 0
    local checkInterval = 0.2  -- æ¯0.2ç§’æ£€æŸ¥ä¸€æ¬¡ç©å®¶çš„å°„å‡»è¡Œä¸º

    RunService.Heartbeat:Connect(function()
        if os.clock() - lastShotTime >= checkInterval then
            lastShotTime = os.clock()

            -- æ£€æŸ¥ç©å®¶æ˜¯å¦è¢«å°ç¦
            if BulletThroughWallDetector.CheckBanStatus(player) then
                return
            end

            -- ç©å®¶å°„å‡»çš„é€»è¾‘
            local char = player.Character
            if not char then return end

            local hrp = char:FindFirstChild("HumanoidRootPart")
            if not hrp then return end

            -- å‡è®¾ç©å®¶å°„å‡»çš„ä½ç½®æ˜¯é€šè¿‡ç©å®¶çš„ `Mouse` å¯¹è±¡æ¥è·å¾—çš„
            local mouse = player:GetMouse()
            local shotPosition = hrp.Position
            local targetPosition = mouse.Hit.p

            -- æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç©¿å¢™è¡Œä¸º
            if BulletThroughWallDetector.DetectBulletThroughWall(player, shotPosition, targetPosition) then
                -- æ£€æµ‹åˆ°ç©¿å¢™è¡Œä¸ºï¼Œç«‹åˆ»å¤„ç½š
                BulletThroughWallDetector.BanPlayer(player, "BulletThroughWallCheat")
            end
        end
    end)
end

-- å¤„ç†ç©å®¶åŠ å…¥äº‹ä»¶
function BulletThroughWallDetector.Start()
    Players.PlayerAdded:Connect(function(player)
        -- å…ˆæ£€æŸ¥ç©å®¶æ˜¯å¦è¢«å°ç¦
        if BulletThroughWallDetector.CheckBanStatus(player) then
            return
        end

        -- ç›‘æ§ç©å®¶å°„å‡»è¡Œä¸º
        BulletThroughWallDetector.MonitorPlayer(player)
    end)
end

return BulletThroughWallDetector
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Notification = ReplicatedStorage:WaitForChild("Notification")
local AdminAccessGranted = ReplicatedStorage:WaitForChild("AdminAccessGranted")
local AdminAccessDenied = ReplicatedStorage:WaitForChild("AdminAccessDenied")

-- ç›‘å¬æœåŠ¡å™¨ç«¯å‘æ¥çš„æƒé™é€šçŸ¥
Notification.OnClientEvent:Connect(function(message)
    -- æ˜¾ç¤ºé€šçŸ¥ç»™ç©å®¶
    print("é€šçŸ¥: " .. message)
    -- è¿™é‡Œå¯ä»¥åˆ›å»ºä¸€ä¸ª GUI æˆ–è€…ç›´æ¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ¶ˆæ¯
end)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local DataStoreService = game:GetService("DataStoreService")
local AdminStore = DataStoreService:GetDataStore("AdminPermissions_v1")  -- å­˜å‚¨ç®¡ç†å‘˜æƒé™æ•°æ®

local foxUsername = "[ğŸ› ï¸]"  -- åªæœ‰è¯¥ç”¨æˆ·åçš„ç©å®¶æ‰èƒ½è®¾ç½®ç®¡ç†æƒé™

-- å­˜å‚¨æƒé™è®°å½•
local function getPermissionKey(userId)
    return "permissions:" .. tostring(userId)
end

-- è®¾ç½®ç©å®¶æƒé™
local function setPlayerPermission(player, permissionLevel)
    local userId = player.UserId
    local success, err = pcall(function()
        AdminStore:SetAsync(getPermissionKey(userId), permissionLevel)
    end)

    if success then
        return true
    else
        warn("è®¾ç½®æƒé™å¤±è´¥: " .. err)
        return false
    end
end

-- è·å–ç©å®¶æƒé™
local function getPlayerPermission(player)
    local userId = player.UserId
    local permissionLevel, err = pcall(function()
        return AdminStore:GetAsync(getPermissionKey(userId))
    end)

    if permissionLevel then
        return permissionLevel
    else
        warn("è·å–æƒé™å¤±è´¥: " .. err)
        return nil
    end
end

-- ç›‘å¬èŠå¤©è¾“å…¥æŒ‡ä»¤
Players.PlayerAdded:Connect(function(player)
    player.Chatted:Connect(function(message)
        -- åªæœ‰ "[ğŸ› ï¸]" èƒ½ä½¿ç”¨è¯¥æŒ‡ä»¤
        if player.Name == foxUsername then
            local args = string.split(message, " ")
            if args[1] == "/setPermission" and #args == 3 then
                local targetName = args[2]
                local permissionLevel = args[3]:lower()

                -- è·å–ç›®æ ‡ç©å®¶
                local targetPlayer = Players:FindFirstChild(targetName)
                if targetPlayer then
                    -- è®¾ç½®ç›®æ ‡ç©å®¶æƒé™
                    if setPlayerPermission(targetPlayer, permissionLevel) then
                        -- æˆåŠŸåï¼Œå‘æ‰€æœ‰äººå¹¿æ’­
                        ReplicatedStorage.BroadcastMessage:FireAllClients(targetPlayer.Name .. " çš„æƒé™å·²è¢«è®¾ç½®ä¸º: " .. permissionLevel)
                        -- ç»™ç›®æ ‡ç©å®¶å‘é€é€šçŸ¥
                        game.ReplicatedStorage.Notification:FireClient(targetPlayer, "ä½ çš„æƒé™å·²è¢«è®¾ç½®ä¸º: " .. permissionLevel)
                    else
                        -- å¦‚æœè®¾ç½®å¤±è´¥ï¼Œé€šçŸ¥ç®¡ç†å‘˜
                        player:Kick("è®¾ç½®æƒé™å¤±è´¥!")
                    end
                else
                    player:Kick("æ‰¾ä¸åˆ°ç©å®¶ " .. targetName)
                end
            end
        end
    end)
end)

-- å¤„ç†ç©å®¶çš„æƒé™é€»è¾‘ï¼ˆè¿™é‡Œæ˜¯ç”¨ä½œåˆ¤æ–­æ˜¯å¦å¯ä»¥æ‰§è¡Œç®¡ç†å‘˜æƒé™ï¼‰
game.ReplicatedStorage.CheckPlayerPermission.OnServerEvent:Connect(function(player)
    local permissionLevel = getPlayerPermission(player)
    if permissionLevel then
        if permissionLevel == "high" then
            -- å…è®¸é«˜æƒé™ç©å®¶ä½¿ç”¨ç®¡ç†å‘˜æŒ‡ä»¤
            game.ReplicatedStorage.AdminAccessGranted:FireClient(player)
        else
            -- ä¸å…è®¸ä½æƒé™ç©å®¶ä½¿ç”¨ç®¡ç†å‘˜æŒ‡ä»¤
            game.ReplicatedStorage.AdminAccessDenied:FireClient(player)
        end
    else
        -- ç©å®¶æ²¡æœ‰æƒé™
        game.ReplicatedStorage.AdminAccessDenied:FireClient(player)
    end
end)
-- ç›‘å¬æ˜¯å¦è¢«æˆäºˆç®¡ç†å‘˜æƒé™
AdminAccessGranted.OnClientEvent:Connect(function()
    print("ä½ å·²è·å¾—ç®¡ç†å‘˜æƒé™ï¼")
    -- å¯ä»¥æ˜¾ç¤ºæŸäº›ç®¡ç†å‘˜ç•Œé¢æˆ–ç‰¹æ®ŠåŠŸèƒ½
end)

-- ç›‘å¬æ˜¯å¦æ‹’ç»ç®¡ç†å‘˜æƒé™
AdminAccessDenied.OnClientEvent:Connect(function()
    print("ä½ æ²¡æœ‰ç®¡ç†å‘˜æƒé™ï¼")
    -- å¯ä»¥ç¦ç”¨æŸäº›ç®¡ç†å‘˜åŠŸèƒ½
end)
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Notification = ReplicatedStorage:WaitForChild("Notification")
local AdminAccessGranted = ReplicatedStorage:WaitForChild("AdminAccessGranted")
local AdminAccessDenied = ReplicatedStorage:WaitForChild("AdminAccessDenied")

-- ç›‘å¬æœåŠ¡å™¨ç«¯å‘æ¥çš„æƒé™é€šçŸ¥
Notification.OnClientEvent:Con
